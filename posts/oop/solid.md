---
layout: post
title:  "SOLID"
date:   2020-06-02 01:02:59
author: Inhyuk
category: oop
cover:  "/assets/instacode.png"
name: solid.md
---

- SOLID : SRP + OCP + LSP + ISP + DIP

- - -

SRP
=======

- 단일 책임 원칙 : 객체는 하나의 책임만을 가져야한다.
- 책임 : 해야하는 것, 할 수 있는 것 등을 의미함
- 클래스의 변경 이유는 **책임** 이 변경되었기 때문이다

책임 분리
--------

- 회기(regression) 테스트 : 시스템에 변경이 발생할 때 기존의 기능에 영향을 주는지를 평가하는 테스트.
- 클래스의 책임이 클 수록 변경이 발생하였을 때 테스트해야하는 범위가 증가.
- 하나의 책임이 여러 개의 클래스들로 분산되어 있는 경우에도 단일 책임 원칙에 입각해 설계를 변경해야 하는 경우가 존재
- 여러 개의 클래스에 책임이 분산된 경우 클래스를 모두 변경하지 않으면 프로그램이 정상적으로 동작하지 않고 에러가 발생.
- cross-cutting concern(횡단 관심) : 로깅, 보안, 트랜잭션과 같은 기능으로 하나의 책임이 여러개의 클래스로 분리되어 있는 것들. 대부분 시스템 핵심 기능안에 포함되는 부가 기능
  - 로그의 경우에는 여러 부분에서 로그의 변경 사항을 동시에 반영해야 할 수도 있다.
  - 이 문제는 부가 기능을 별개의 클래스로 분리해서 책임을 담당하게 한다
  - 그러나 이런 방법도 결국에는 어떤 클래스 안에 속하게 되어 있다.

- - -

Open closed principle
======================

- 수정에는 닫혀 있고, 확장에는 열려 있어야 한다.
- OCP를 위반하지 않는 설계는 **무엇이 변하는 것인지, 무엇이 변하지 않는 것인지** 를 구분해야 한다. 변하는 것은 쉽게 변할 수 있게 하고 변하지 않는 것은 변화에 영향을 받지 않게 해야한다.

- 또한, 클래스를 변경하지 않고도 대상 클래스의 환경을 변경할 수 있는 설계가 되어야한다. 이는 단위테스트에 중요한다. 테스트에 필요한 객체를 가짜 객체를 이용하여 대신한다

- 모의 객체: 객체를 대신하는 가짜 객체. 단위 테스트에 사용
  - dummy object : 테스트할 때 객체만 필요하고 객체의 기능이 필요하지 않는 경우에 사용. 더미 객체의 메서드 호출 시 예외 발생
  - test stub : dummy object에 객체의 특성 상태를 가정해서 작성하여 특정한 값을 반환하게 함.
  - test spy : 주로 테스트 대상 클래스가 의존하는 클래스로의 출력을 검증하는 데에 사용. 의존하는 클래스의 호출을 보고 실행 종료 후 제대로 호출 되었는 지를 검사
  - fake object : 실제 의존 클래스의 기능을 대체하기 위하여 기능 중 일부를 훨씬 단순하게 구현한 것. 의존 클래스가 구현되지 않았거나, 너무 느린 경우에 사용
  - mock object : 위의 모든 형태를 포함하는 의미로 사용

- - -

리스코프 치환 원칙
=====================

- LSP : 일반화 관계에서 자식 클래스는 최소한 부모 클래스에서 가능한 행위는 수행할 수 있어야 한다는 의미. 이를 위해 부모 클래스와 자식 클래스 사이의 행위는 일관되어야 한다.
- 상속 받은 메서드를 서브 클래스에서 오버라이드 하지 않으면 된다

- - -

Interface Segregation Principle
==============================

- 인터페이스 분리 원칙 : 클라이언트 자신이 이용하지 않는 기능에 대한 것에는 영향을 받지 않아야 한다는 원칙
- 클라이언트와 무관하게 발생한 변화로 클라이언트가 영향을 받지 않으려면 범용 인터페이스 보다는 클라이언트에 특화된 인터페이스를 사용해야 한다
- 즉, 인터페이스를 사용자에 맞게 분리 시키라는 원칙

- - -

의존 역전 원칙(DIP)
============

- 의존 관계를 맺을 때의 가이드라인
- 변화하기 쉽고 자주 변하는 것보다는 변하기 어려운 것에 의존하라는 원칙
- 클래스의 의존 관계를 특정 클래스가 아닌 인터페이스나 추상 클래스와 맺도록 설계
- DIP를 만족하면  **Dependency Injection** 이라는 기술을 이용 가능.
  - DI : 클래스 내부의 의존 대상을 외부의 인스턴스 변수로 주입하는 기술

![isp]({{site.baseurl}}/post_img/{{page.name}}/isp.png)

ISP와 SRP
------------

- SRP를 만족하더라도 책임의 크기가 크면 큰 인터페이스를 제공할 수도 있기 때문에 ISP를 만족하지 않을 수 있다


- - -

참고 자료
===========

- <https://walbatrossw.github.io/oop/2018/07/27/07-solid-isp.html#1-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%B6%84%EB%A6%AC-%EC%9B%90%EC%B9%99%EC%9D%B4%EB%9E%80>
